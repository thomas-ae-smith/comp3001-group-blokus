<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<title>Blokus{% block title %}{% endblock %}</title>
		<meta name="description" content="Blokus Game" />
		<meta name="author" content="Comp3001 Group Blokus" />
		<link rel="shortcut icon" href="favicon.ico" />
		<link rel="apple-touch-icon" href="apple-touch-icon.png" />
		<link rel="stylesheet" href="{{ STATIC_URL }}css/layout.css" type="text/css"/>
		{% block extracss %}{% endblock %}
		<script src="{{ STATIC_URL }}js/jquery.js"></script>
		<script src="{{ STATIC_URL }}js/raphael.js"></script>
		<script src="{{ STATIC_URL }}js/underscore.js"></script>
		<script src="{{ STATIC_URL }}js/backbone.js"></script>
		<!-- blokus core -->
		<script src="{{ STATIC_URL }}js/blokus.js"></script>
		<script src="{{ STATIC_URL }}js/models.js"></script>
		<script src="{{ STATIC_URL }}js/collections.js"></script>
		<script src="{{ STATIC_URL }}js/shape.js"></script>
		<script src="{{ STATIC_URL }}js/ForgotView.js"></script>
		<script src="{{ STATIC_URL }}js/GameView.js"></script>
		<script src="{{ STATIC_URL }}js/HelpView.js"></script>
		<script src="{{ STATIC_URL }}js/LobbyView.js"></script>
		<script src="{{ STATIC_URL }}js/ProfileView.js"></script>
		<script src="{{ STATIC_URL }}js/RegisterView.js"></script>
		<script src="{{ STATIC_URL }}js/GameBoard.js"></script>
		<script src="{{ STATIC_URL }}js/PlayerPanel.js"></script>
		<script src="{{ STATIC_URL }}js/utils.js"></script>
		<script src="{{ STATIC_URL }}js/labels.js"></script>
	</head>
	<body>
		<img src="{{ STATIC_URL }}img/logo.png" id="logo"/>
		<div class="vignette"></div>
		<div id="errorstackcontainer"><div id="errorstack"></div></div>
		<div id="msgcontainer"><div id="msg" style="display: none"><div class="content">Message</div><div class="buttons"><a href="javascript:;" class="button close">OK</a></div></div></div>
		<div id="container"></div>
		<div class="templates">
			<script type="text/html" id="lobby-template">
				<div id="profileBox" class="box">
					<img alt="avatar" src="<%= picsrc %>" />
					<div id="profileInfo">
						<div class="welcome serif">Hello <%= name %>!</div>
						<div class="stats"><%= stats %></div>
					</div>
					<div id="profileMenu" <%= hideProfile %>>
						<a href="#profile" class="button">Profile</a>
						<a href="/logout/" id="signout-button" class="button">Logout</a>
					</div>
					<div id="signedOut" <%= hideSignOut %>>
						<form action="/login/" method="post">
							{% csrf_token %}
							<label>
								<span>Username</span>
								<input name="username" type="text" />
							</label>
							<label>
								<span>Password</span>
								<input name="password" type="password" />
							</label>
							<input type="submit" value="Log in" class="button">
						</form>
						<div class="links">
							<a href="/debug">Temp register</a> <a href="/login">Temp login</a>
							<a href="#register">Register (FIXME)</a>
							<a href="#forgot">Forgot your password? (FIXME)</a>
						</div>
					</div>
				</div>
				<ul class="modelist">
					<li class="box">
						<div>
							<h2>quick<br/>play</h2>
						</div>
						<p>Start playing a 2 or 4 player game with anyone</p>
						<a href="#game/1" class="button">Play Now</a>
					</li>
					<li class="box">
						<div>
							<h1>2</h1>
							<h3>players</h3>
						</div>
						<p>Play a 2 player Blokus game</p>
						<a href="javascript:;" class="button">Play Now</a>
					</li>
					<li class="box">
						<div>
							<h1>4</h1>
							<h3>players</h3>
						</div>
						<p>Play a 4 player Blokus game</p>
						<a href="javascript:;" class="button">Play Now</a>
					</li>
					<li class="box">
						<div>
							<h2>private<br/>game</h2>
						</div>
						<p>Start a private game by inviting your friends</p>
						<a href="javascript:;" class="button">Play Now</a>
					</li>
				</ul>
				<div id="waiting" class="box clearfix serif"  style="display:none;">
					<div>
						<div class="title"></div>
						<p>Waiting for other players...</p>
						<div class="loading"></div>
						<a href="javascript:;" class="button" id="cancel">Cancel</a>
					</div>
				</div>
				<div id="privatelobby" class="box clearfix serif" style="display:none;">
					<div>
						<div class="title">private game</div>
						<p>How many players?</p>
						<div class="playerchoices">
							<div class="p2">
								<b class="big">2</b> <b class="players">players</b>
								<p>Each player will have two colours</p>
							</div>
							<div class="p4">
								<b class="big">4</b> <b class="players">players</b>
								<p>Each player will have one colour</p>
							</div>
						</div>
						<div class="details" style="display: none">
							<p>Tell your friends to go to the following URL to join the game</p>
							<input type="text" id="gameurl" class="serif" value="http://blokus.fdsfsd">
							<div class="players">
								<div class="p1">
									<span class="name">Player 1</span><div class="colour"></div>
									<div class="online"><img class="pic"><b class="name"></b></div>
									<div class="offline">Waiting for player...</div>
								</div><div class="p2">
									<span class="name">Player 2</span><div class="colour"></div>
									<div class="online"><img class="pic"><b class="name"></b></div>
									<div class="offline">Waiting for player...</div>
								</div><div class="p3">
									<span class="name">Player 3</span><div class="colour"></div>
									<div class="online"><img class="pic"><b class="name"></b></div>
									<div class="offline">Waiting for player...</div>
								</div><div class="p4">
									<span class="name">Player 4</span><div class="colour"></div>
									<div class="online"><img class="pic"><b class="name"></b></div>
									<div class="offline">Waiting for player...</div>
								</div>
							</div>
						</div>
						<div class="buttons">
							<a href="javascript:;" class="button" id="cancel">Cancel</a>
							<a href="javascript:;" class="button disabled" id="start">Waiting for players...</a>
						</div>
					</div>
				</div>
			</script>
			<script type="text/html" id="game-template">
				<div class="loading"></div>
				<div id="helpscreen" style="display: none">
					<h1>How to play blokus</h1>
					<p><h2>About Blokus</h2>
					Blokus (pronounced "block us") is a simple strategy board game for two or four players. Blokus is much like Dominoes; the aim is to use all of your pieces. Unlike Dominoes though Blokus uses polyominoes, is played on a 20x20 board, and has a few extra rules.</p>
					<br>
					<p><h2>How To Play</h2>
					Blue goes first, followed by yellow, red, and green. On your turn you must take a piece in your colour that has not been previously placed and add it to the board. The placing of these pieces is restricted by the following rules.<br><ul><li>1. The first piece played of each color must be placed in one of the four corners of the board.</li><li>2. All subsequent pieces must be placed so that they share a corner with at least one piece of the same color.</li><li>3. No piece placed may share and edge with any pieces of the same colour.</li></ul></P>
					<br>
					<p><h2>2 Player Varient</h2>
					If there are only 2 players then each player controls 2 colours. This opens up many new strategies as one colour may be sacrificed for the benefit of the other.</p>
					<br>
					<p><h2>End of the Game</h2>
					When a player can no longer place any pieces on the board, they must miss their turn. The other players continue in the normal order of play until no one can place any more pieces on the board. At which point scores are calculated based on the following rules.<br><ul><li>1. Each square which is not placed on the board counts as a negative point.</li><li>2. A bonus of 15 points is awarded if all 21 pieces have been placed on the board.</li><li>3. This bonus is increased to 20 points if the 21 pieces were placed on the board with the single square being placed last.</li></ul>
					<br>
					<p><h2>Controls</h2>
					<ul><li>- To Pick up a piece: Left click on it once. This will attach it to your cursor.</li><li>- To drop a piece: Press 'Esc'</li><li>- To place a piece: Left click on the board in a valid position while holding a piece</li><li>- To rotate a piece: Press the left or right arrow keys while holding a piece</li><li>- To flip a piece horizontally: Press 'H' while holding a piece</li><li>- To flip a piece vertically: Press 'V' while holding a piece</li></ul></p>
					<div class="buttons"><a class="button close" href="javascript:;">Close</a></div>
				</div>
				<div class="playerpanelcontainer left"></div>
				<div class="playerpanelcontainer right"></div>
				<!-- everything below is placeholder -->
				<div class="top-panel">
					<div class="left">
						<b>Table ID:</b><br>
						<span class="uri"></span><br><br>
						<b>Table URL:</b><br>
						http://blahblah.com#<span class="uri"></span>
					</div>
					<input type="button" class="button help" value="How to play">
					<input type="button" class="button exit" value="Exit game">
					<div class="right">
						<b>Duration:</b><br>
						<span class="duration"></div><br><br>
						<b>Player turn:</b><br>
						<span class="playerduration"></div>
						<div class="clock"></div>
					</div>
				</div>
				<div class="board-bg">
					<div class="board"></div>
				</div>
			</script>
			<script type="text/html" id="player-panel-template">
				<img class="pic">
				<div class="name"><%= name %></div>
				<div class="wins">wins: <span class="val"><%= wins %></val></div>
				<div class="losses">losses: <span class="val"><%= losses %></val></div>
			</script>
			<script type="text/html" id="register-template">
				<form action="/register/" method="post" class="box form">
					{% csrf_token %}
					<h1>Register</h1>
					<p>Registration can't be this quick and easy... can it?</p>
					<label>
						<span>Username</span>
						<input name="username" type="text" />
					</label><br/>
					<label>
						<span>Email Address</span>
						<input name="email" type="text" />
					</label><br/>
					<label>
						<span>Password</span>
						<input name="password" type="password" />
					</label><br/>
					<label>
						<span>Confirm Password</span>
						<input name="password2" type="password" />
					</label><br/>
					<input type="submit" value="Register" class="button" /> <input type="button" value="Cancel" class="button" onclick="window.location.href='#'"/>
				</form>
			</script>
			<script type="text/html" id="forgot-template">
				<form name="forgotForm" action="/forgot/" method="post" class="form box">
					{% csrf_token %}
					<h1>Forgot your password</h1>
					<p>Enter your email address below to recieve a new password</p>
					<label>
						<span>Email Address</span>
						<input name="email" type="text" />
					</label><br/>
					<input type="submit" value="Send Email" class="button"/> <input type="button" value="Cancel" class="button" onclick="window.location.href='#'"/>
				</form>
				</div>
			</script>
			<script type="text/html" id="profile-template">
				<h2><%= username %>'s profile</h2>
				<dl>
					<dt>Joined</dt><dd><%= joined %></dd>
					<dt>Wins</dt><dd><%= wins %></dd>
					<dt>Losses</dt><dd><%= losses %></dd>
				</dl>
				<% if (username === blip.user.get("username")) { %>
					<input type="button" value="Edit">
				<% } %>
			</script>
		</div>
	</body>
</html>